<% content_for(:title) { t('settings.title') } %>

<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- 페이지 헤더 -->
  <div class="mb-8">
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white">
      <%= t('settings.title') %>
    </h1>
  </div>

  <!-- 푸시 알림 설정 카드 -->
  <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm"
       data-controller="push-subscription"
       data-push-subscription-vapid-public-key-value="<%= Rails.application.credentials.dig(:vapid, :public_key) %>">
    <div class="p-6">
      <div class="flex items-center mb-4">
        <%= lucide_icon "bell", class: "w-6 h-6 text-blue-600 dark:text-blue-400 mr-3" %>
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white">
          <%= t('settings.push_notifications.title') %>
        </h2>
      </div>

      <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">
        <%= t('settings.push_notifications.description') %>
      </p>

      <div class="flex flex-col sm:flex-row gap-3">
        <!-- 구독 버튼 -->
        <button type="button"
                data-push-subscription-target="subscribeButton"
                data-action="click->push-subscription#subscribe"
                class="inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:hover:bg-blue-500 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800">
          <%= lucide_icon "bell-plus", class: "w-4 h-4 mr-2" %>
          <%= t('settings.push_notifications.subscribe') %>
        </button>

        <!-- 구독 취소 버튼 -->
        <button type="button"
                data-push-subscription-target="unsubscribeButton"
                data-action="click->push-subscription#unsubscribe"
                class="hidden inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800">
          <%= lucide_icon "bell-off", class: "w-4 h-4 mr-2" %>
          <%= t('settings.push_notifications.unsubscribe') %>
        </button>
      </div>

      <!-- 상태 메시지 -->
      <p data-push-subscription-target="status" class="hidden mt-3 text-sm"></p>
    </div>
  </div>
</div>
