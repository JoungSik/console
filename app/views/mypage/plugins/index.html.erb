<% content_for(:title) { t('settings.plugins.title') } %>

<div class="w-full">
  <!-- 페이지 헤더 -->
  <div class="mb-8">
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white">
      <%= t('settings.plugins.title') %>
    </h1>
    <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
      <%= t('settings.plugins.description') %>
    </p>
  </div>

  <div class="space-y-4">
    <% @plugins.each do |item| %>
      <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm p-4 sm:p-6">
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
          <div class="flex items-start sm:items-center min-w-0">
            <%= lucide_icon item[:plugin].icon, class: "w-6 h-6 text-blue-600 dark:text-blue-400 mr-3 flex-shrink-0 mt-0.5 sm:mt-0" %>
            <div class="min-w-0">
              <h3 class="text-base sm:text-lg font-semibold text-gray-900 dark:text-white">
                <%= item[:plugin].label %>
              </h3>
              <p class="text-sm text-gray-500 dark:text-gray-400 mt-0.5">
                <%= t("settings.plugins.descriptions.#{item[:plugin].name}", default: "") %>
              </p>
              <% unless item[:enabled] %>
                <p class="text-sm text-red-600 dark:text-red-400 mt-1">
                  <%= lucide_icon "alert-triangle", class: "w-4 h-4 inline mr-1" %>
                  <%= t('settings.plugins.days_until_deletion', days: item[:days_until_deletion]) %>
                </p>
              <% end %>
            </div>
          </div>

          <%= button_to toggle_mypage_plugin_path(item[:plugin].name),
              method: :patch,
              class: "self-start flex-shrink-0 " + (item[:enabled] ?
                "bg-blue-600 hover:bg-blue-700 dark:hover:bg-blue-500 text-white font-medium px-3 py-1.5 sm:px-4 sm:py-2 text-sm rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800" :
                "bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-600 font-medium px-3 py-1.5 sm:px-4 sm:py-2 text-sm rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800") do %>
            <%= item[:enabled] ? t('settings.plugins.enabled') : t('settings.plugins.activate') %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <!-- 뒤로가기 -->
  <div class="mt-6">
    <%= link_to mypage_user_path,
        class: "text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200 text-sm font-medium" do %>
      <%= lucide_icon "arrow-left", class: "w-4 h-4 inline mr-1" %>
      <%= t('settings.mypage.title') %>
    <% end %>
  </div>
</div>
